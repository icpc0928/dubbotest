<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:jee="http://www.springframework.org/schema/jee"
	xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/jee
     	http://www.springframework.org/schema/jee/spring-jee-2.5.xsd">
	<!-- 配置Cluster -->
	 <bean id="redisClusterConfiguration"
	    class="org.springframework.data.redis.connection.RedisClusterConfiguration">
	    <property name="maxRedirects" value="3"></property>
	    <!-- 节点配置 -->
	    <property name="clusterNodes">
	        <set>
	            <bean class="org.springframework.data.redis.connection.RedisClusterNode">
	                <constructor-arg name="host" value="172.28.87.71"></constructor-arg>
	                <constructor-arg name="port" value="5085"></constructor-arg>
	            </bean>
	        </set>
	    </property>
	</bean>
	
	 <bean id="jdkCompress"
	        class="com.effecia.lottery.redis.JdkCompressSerializationRedisSerializer" />
	<bean id="stringRedisSerializer"
	        class="org.springframework.data.redis.serializer.StringRedisSerializer" />
	        
	<bean id="jedisClusterConnectionFactory"
	    class="org.springframework.data.redis.connection.jedis.JedisConnectionFactory">
	    <constructor-arg ref="redisClusterConfiguration" />
	    <constructor-arg ref="jedisPoolConfig" />
	    <property name="password" value="IGyOuFrdS232@#%301*" />
		<property name="usePool" value="true" />
	</bean>
	<!-- redis 访问的模版 -->
	<bean id="redisClusterTemplate" class="org.springframework.data.redis.core.RedisTemplate">
	    <property name="connectionFactory" ref="jedisClusterConnectionFactory" />
	    <property name="keySerializer" ref="stringRedisSerializer"/>
	    <property name="valueSerializer" ref="jdkCompress"/>
	     <property name="hashKeySerializer" ref="stringRedisSerializer"/>
	    <property name="hashValueSerializer" ref="jdkCompress"/>
	</bean>
</beans>  